# APIDocumentation

**Generated by scev-self-charging-electric-vehicle v1.0.0**  
**Category:** technical-design  
**Generated:** 2025-08-17T09:20:27.093Z  
**Description:** 

---

## Self-Charging Electric Vehicle (SCEV) API Documentation

This document outlines the API for interacting with a Self-Charging Electric Vehicle (SCEV) system.  The API utilizes RESTful principles and adheres to OpenAPI/Swagger standards.  Note that this API focuses on data related to the vehicle's charging and energy management systems; it does not include driving dynamics or vehicle control APIs.

**1. API Overview**

The SCEV API provides endpoints for retrieving and managing data related to the vehicle's self-charging capabilities, energy consumption, and energy distribution to/from the grid.  The API is designed to be used by various applications, including mobile apps, dashboard displays, and energy management systems.

**2. Authentication Methods**

The API uses API keys for authentication.  Each API key is unique to a specific user or application and must be included in the `X-API-Key` header of each request.  API keys are managed through a separate user management system (not covered in this specification).

**3. Endpoint Definitions**

All endpoints are based on the base URL: `/api/v1/`.

| Method | Endpoint          | Description                                                                     | Authentication | Request Body   | Response Body           |
|--------|----------------------|---------------------------------------------------------------------------------|-----------------|-----------------|---------------------------|
| GET    | `/vehicle/status`   | Retrieves the current status of the vehicle (charging status, battery level, etc.) | Required       | None            | `VehicleStatusResponse` |
| GET    | `/energy/history`  | Retrieves historical energy data (charging, discharging, generation)           | Required       | `EnergyHistoryRequest` | `EnergyHistoryResponse` |
| POST   | `/energy/settings` | Updates the energy settings (grid interaction mode, charging preferences, etc.) | Required       | `EnergySettingsRequest` | `EnergySettingsResponse`|
| GET    | `/solar/status`    | Retrieves the current status of the solar panel system (power generation, etc.) | Required       | None            | `SolarStatusResponse`    |
| GET    | `/grid/status`     | Retrieves the current status of the grid connection (power import/export)      | Required       | None            | `GridStatusResponse`     |


**4. Request/Response Formats**

The API uses JSON for both request and response bodies.

**4.1 `VehicleStatusResponse`**

```json
{
  "batteryLevel": 75, // Percentage
  "chargingStatus": "Charging", // "Charging", "Discharging", "Idle"
  "gridInteractionMode": "Export", // "Export", "Import", "Off"
  "solarPowerGeneration": 1500, // Watts
  "timestamp": "2024-10-27T10:30:00Z"
}
```

**4.2 `EnergyHistoryRequest`**

```json
{
  "startDate": "2024-10-26T00:00:00Z",
  "endDate": "2024-10-27T00:00:00Z",
  "interval": "hourly" // "hourly", "daily", "weekly"
}
```

**4.3 `EnergyHistoryResponse`**

```json
{
  "data": [
    {"timestamp": "2024-10-26T10:00:00Z", "charged": 500, "discharged": 200, "generated": 300},
    {"timestamp": "2024-10-26T11:00:00Z", "charged": 600, "discharged": 150, "generated": 400}
    // ... more data points
  ]
}
```

**4.4 `EnergySettingsRequest`**

```json
{
  "gridInteractionMode": "Export",
  "minBatteryLevel": 20,
  "maxChargingRate": 6 // kW
}
```

**4.5 `EnergySettingsResponse`**

```json
{
  "gridInteractionMode": "Export",
  "minBatteryLevel": 20,
  "maxChargingRate": 6,
  "message": "Energy settings updated successfully."
}
```

**4.6 `SolarStatusResponse`**

```json
{
    "powerGeneration": 1200, // Watts
    "panelTemperature": 25, // Celsius
    "sunlightIntensity": 80, // Percentage
    "timestamp": "2024-10-27T11:00:00Z"
}
```

**4.7 `GridStatusResponse`**

```json
{
    "powerImport": 0, // Watts
    "powerExport": 1000, // Watts
    "gridVoltage": 230, // Volts
    "timestamp": "2024-10-27T11:00:00Z"
}
```


**5. Error Codes**

| Code    | Description                                    | HTTP Status |
|---------|------------------------------------------------|-------------|
| 400     | Bad Request (invalid request parameters)         | 400         |
| 401     | Unauthorized (missing or invalid API key)      | 401         |
| 403     | Forbidden (insufficient permissions)           | 403         |
| 404     | Not Found (resource not found)                 | 404         |
| 429     | Too Many Requests (rate limit exceeded)         | 429         |
| 500     | Internal Server Error (unexpected server error) | 500         |


**6. Rate Limiting**

The API has a rate limit of 100 requests per minute per API key.  Exceeding this limit will result in a `429 Too Many Requests` error.

**7. Versioning Strategy**

Versioning is handled through URI versioning (`/api/v1/`).  Future versions will be indicated by incrementing the version number.

**8. Security Considerations**

* **API Key Security:** API keys should be treated as sensitive information and protected accordingly.
* **HTTPS:** All communication should be conducted over HTTPS to ensure data confidentiality and integrity.
* **Input Validation:** All input parameters should be validated to prevent injection attacks.

**9. Example Usage (cURL)**

```bash
curl -H "X-API-Key: YOUR_API_KEY" -X GET "https://api.example.com/api/v1/vehicle/status"
```

**10. Testing Guidelines**

Thorough testing is crucial.  Unit tests should be written to verify the functionality of individual endpoints. Integration tests should be used to test the interaction between different components of the system.  Load tests should be performed to evaluate the API's performance under stress.  Security testing should be conducted to identify and mitigate potential vulnerabilities.

**Appendix:  Detailed Model Descriptions (for Energy Harvesting System -  as requested in the original prompt)**

This section details the mathematical models referenced in the project README's discussion of pendulum energy harvesting for the TPMS.  These are simplified models and would require significant refinement for practical implementation.

**A.1 Pendulum Dynamics Model**

This model describes the motion of a simple pendulum within a rotating wheel.  The model simplifies the system by assuming:

* **Small Angle Approximation:** The pendulum swings through small angles, allowing for the simplification of the sine function in the equation of motion.
* **Constant Wheel Speed:** The wheel rotates at a constant angular velocity.
* **Negligible Damping:** Air resistance and other forms of damping are initially ignored.

The equation of motion for the pendulum angle (θ) can be approximated as:

`d²θ/dt² + (g/L)θ = ω²cos(ωt)`

Where:

* `g` is the acceleration due to gravity
* `L` is the length of the pendulum
* `ω` is the angular velocity of the wheel
* `t` is time

This is a forced harmonic oscillator equation.  Solving this equation provides the pendulum's angular displacement as a function of time, which can then be used to calculate the pendulum's velocity and kinetic energy.

**A.2 Electromagnetic Induction Model**

This model describes the conversion of the pendulum's kinetic energy into electrical energy through electromagnetic induction.  It assumes:

* **Linear Relationship:** The voltage induced in the coil is linearly proportional to the pendulum's velocity.
* **Constant Magnetic Field:** The magnetic field generated by the magnets is constant and uniform.

The induced voltage (V) can be expressed as:

`V = k * dθ/dt`

Where:

* `k` is a constant that depends on the coil geometry, magnet strength, and other factors.

The power generated (P) is given by:

`P = V² / R`

Where:

* `R` is the resistance of the coil.

**A.3 Power Output Model**

By combining the pendulum dynamics model and the electromagnetic induction model, an equation for the power output as a function of pendulum weight (m) can be derived. This would require substituting the solution for `dθ/dt` from the pendulum dynamics model into the electromagnetic induction model and then calculating the power.  The resulting equation would be complex and would likely involve several parameters (pendulum length, wheel speed, coil resistance, etc.).

**A.4 Optimization**

Optimization techniques like gradient descent or genetic algorithms could be used to find the pendulum weight that maximizes power output while satisfying constraints on wheel dynamics and TPMS power requirements.  These algorithms would require the power output model as an input.


This API documentation provides a foundation for developing and integrating with the SCEV system.  Further detail will be added as the project progresses.  The appendix provides a starting point for the mathematical modeling required for the energy harvesting system. Remember to replace `"https://api.example.com"` with your actual API base URL.
